var h=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var v=(t,u)=>{var n={};for(var l in t)L.call(t,l)&&u.indexOf(l)<0&&(n[l]=t[l]);if(t!=null&&h)for(var l of h(t))u.indexOf(l)<0&&j.call(t,l)&&(n[l]=t[l]);return n};import{defineComponent as g,ref as p,provide as I,inject as R,computed as y,watchEffect as $,onMounted as E,onUnmounted as x}from"vue";import{Keys as D}from'../../keyboard.js';import{match as B}from'../../utils/match.js';import{render as C,Features as T}from'../../utils/render.js';import{useId as k}from'../../hooks/use-id.js';import{dom as f}from'../../utils/dom.js';import{useOpenClosedProvider as U,State as b,useOpenClosed as F}from'../../internal/open-closed.js';import{useResolveButtonType as W}from'../../hooks/use-resolve-button-type.js';var _=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(_||{});let K=Symbol("DisclosureContext");function O(t){let u=R(K,null);if(u===null){let n=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,O),n}return u}let M=Symbol("DisclosurePanelContext");function q(){return R(M,null)}let te=g({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(t,{slots:u,attrs:n}){let l=p(t.defaultOpen?0:1),e=p(null),i=p(null),a={buttonId:p(null),panelId:p(null),disclosureState:l,panel:e,button:i,toggleDisclosure(){l.value=B(l.value,{[0]:1,[1]:0})},closeDisclosure(){l.value!==1&&(l.value=1)},close(o){a.closeDisclosure();let r=(()=>o?o instanceof HTMLElement?o:o.value instanceof HTMLElement?f(o):f(a.button):f(a.button))();r==null||r.focus()}};return I(K,a),U(y(()=>B(l.value,{[0]:b.Open,[1]:b.Closed}))),()=>{let c=t,{defaultOpen:o}=c,r=v(c,["defaultOpen"]),d={open:l.value===0,close:a.close};return C({theirProps:r,ourProps:{},slot:d,slots:u,attrs:n,name:"Disclosure"})}}}),le=g({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-disclosure-button-${k()}`}},setup(t,{attrs:u,slots:n,expose:l}){let e=O("DisclosureButton");E(()=>{e.buttonId.value=t.id}),x(()=>{e.buttonId.value=null});let i=q(),a=y(()=>i===null?!1:i.value===e.panelId.value),o=p(null);l({el:o,$el:o}),a.value||$(()=>{e.button.value=o.value});let r=W(y(()=>({as:t.as,type:u.type})),o);function d(){var s;t.disabled||(a.value?(e.toggleDisclosure(),(s=f(e.button))==null||s.focus()):e.toggleDisclosure())}function c(s){var m;if(!t.disabled)if(a.value)switch(s.key){case D.Space:case D.Enter:s.preventDefault(),s.stopPropagation(),e.toggleDisclosure(),(m=f(e.button))==null||m.focus();break}else switch(s.key){case D.Space:case D.Enter:s.preventDefault(),s.stopPropagation(),e.toggleDisclosure();break}}function S(s){switch(s.key){case D.Space:s.preventDefault();break}}return()=>{let s={open:e.disclosureState.value===0},P=t,{id:m}=P,w=v(P,["id"]),H=a.value?{ref:o,type:r.value,onClick:d,onKeydown:c}:{id:m,ref:o,type:r.value,"aria-expanded":t.disabled?void 0:e.disclosureState.value===0,"aria-controls":f(e.panel)?e.panelId.value:void 0,disabled:t.disabled?!0:void 0,onClick:d,onKeydown:c,onKeyup:S};return C({ourProps:H,theirProps:w,slot:s,attrs:u,slots:n,name:"DisclosureButton"})}}}),ne=g({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-disclosure-panel-${k()}`}},setup(t,{attrs:u,slots:n,expose:l}){let e=O("DisclosurePanel");E(()=>{e.panelId.value=t.id}),x(()=>{e.panelId.value=null}),l({el:e.panel,$el:e.panel}),I(M,e.panelId);let i=F(),a=y(()=>i!==null?(i.value&b.Open)===b.Open:e.disclosureState.value===0);return()=>{let o={open:e.disclosureState.value===0,close:e.close},S=t,{id:r}=S,d=v(S,["id"]),c={id:r,ref:e.panel};return C({ourProps:c,theirProps:d,slot:o,attrs:u,slots:n,features:T.RenderStrategy|T.Static,visible:a.value,name:"DisclosurePanel"})}}});export{te as Disclosure,le as DisclosureButton,ne as DisclosurePanel};
