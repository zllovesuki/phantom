var q=Object.defineProperty;var k=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var D=(e,r,a)=>r in e?q(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,L=(e,r)=>{for(var a in r||(r={}))x.call(r,a)&&D(e,a,r[a]);if(k)for(var a of k(r))I.call(r,a)&&D(e,a,r[a]);return e};var A=(e,r)=>{var a={};for(var d in e)x.call(e,d)&&r.indexOf(d)<0&&(a[d]=e[d]);if(e!=null&&k)for(var d of k(e))r.indexOf(d)<0&&I.call(e,d)&&(a[d]=e[d]);return a};import{Fragment as Q,computed as s,defineComponent as P,h as B,inject as X,onMounted as V,onUnmounted as Y,provide as Z,ref as E,toRaw as b,watch as z}from"vue";import{dom as j}from'../../utils/dom.js';import{Keys as g}from'../../keyboard.js';import{focusIn as H,Focus as w,FocusResult as N,sortByDomNode as ee}from'../../utils/focus-management.js';import{useId as K}from'../../hooks/use-id.js';import{compact as te,omit as ae,render as M}from'../../utils/render.js';import{Label as ne,useLabels as _}from'../label/label.js';import{Description as re,useDescriptions as $}from'../description/description.js';import{useTreeWalker as ie}from'../../hooks/use-tree-walker.js';import{Hidden as le,Features as oe}from'../../internal/hidden.js';import{attemptSubmit as ue,objectToFormEntries as de}from'../../utils/form.js';import{getOwnerDocument as F}from'../../utils/owner.js';import{useControllable as se}from'../../hooks/use-controllable.js';function pe(e,r){return e===r}let U=Symbol("RadioGroupContext");function W(e){let r=X(U,null);if(r===null){let a=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,W),a}return r}let Fe=P({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>pe},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-radiogroup-${K()}`}},inheritAttrs:!1,setup(e,{emit:r,attrs:a,slots:d,expose:p}){let f=E(null),o=E([]),R=_({name:"RadioGroupLabel"}),S=$({name:"RadioGroupDescription"});p({el:f,$el:f});let[m,T]=se(s(()=>e.modelValue),t=>r("update:modelValue",t),s(()=>e.defaultValue)),u={options:o,value:m,disabled:s(()=>e.disabled),firstOption:s(()=>o.value.find(t=>!t.propsRef.disabled)),containsCheckedOption:s(()=>o.value.some(t=>u.compare(b(t.propsRef.value),b(e.modelValue)))),compare(t,n){if(typeof e.by=="string"){let i=e.by;return(t==null?void 0:t[i])===(n==null?void 0:n[i])}return e.by(t,n)},change(t){var i;if(e.disabled||u.compare(b(m.value),b(t)))return!1;let n=(i=o.value.find(l=>u.compare(b(l.propsRef.value),b(t))))==null?void 0:i.propsRef;return n!=null&&n.disabled?!1:(T(t),!0)},registerOption(t){o.value.push(t),o.value=ee(o.value,n=>n.element)},unregisterOption(t){let n=o.value.findIndex(i=>i.id===t);n!==-1&&o.value.splice(n,1)}};Z(U,u),ie({container:s(()=>j(f)),accept(t){return t.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function h(t){if(!f.value||!f.value.contains(t.target))return;let n=o.value.filter(i=>i.propsRef.disabled===!1).map(i=>i.element);switch(t.key){case g.Enter:ue(t.currentTarget);break;case g.ArrowLeft:case g.ArrowUp:if(t.preventDefault(),t.stopPropagation(),H(n,w.Previous|w.WrapAround)===N.Success){let l=o.value.find(c=>{var v;return c.element===((v=F(f))==null?void 0:v.activeElement)});l&&u.change(l.propsRef.value)}break;case g.ArrowRight:case g.ArrowDown:if(t.preventDefault(),t.stopPropagation(),H(n,w.Next|w.WrapAround)===N.Success){let l=o.value.find(c=>{var v;return c.element===((v=F(c.element))==null?void 0:v.activeElement)});l&&u.change(l.propsRef.value)}break;case g.Space:{t.preventDefault(),t.stopPropagation();let i=o.value.find(l=>{var c;return l.element===((c=F(l.element))==null?void 0:c.activeElement)});i&&u.change(i.propsRef.value)}break}}let y=s(()=>{var t;return(t=j(f))==null?void 0:t.closest("form")});return V(()=>{z([y],()=>{if(!y.value||e.defaultValue===void 0)return;function t(){u.change(e.defaultValue)}return y.value.addEventListener("reset",t),()=>{var n;(n=y.value)==null||n.removeEventListener("reset",t)}},{immediate:!0})}),()=>{let v=e,{disabled:t,name:n,id:i}=v,l=A(v,["disabled","name","id"]),c={ref:f,id:i,role:"radiogroup","aria-labelledby":R.value,"aria-describedby":S.value,onKeydown:h};return B(Q,[...n!=null&&m.value!=null?de({[n]:m.value}).map(([O,G])=>B(le,te({features:oe.Hidden,key:O,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:O,value:G}))):[],M({ourProps:c,theirProps:L(L({},a),ae(l,["modelValue","defaultValue"])),slot:{},attrs:a,slots:d,name:"RadioGroup"})])}}});var fe=(a=>(a[a.Empty=1]="Empty",a[a.Active=2]="Active",a))(fe||{});let Ce=P({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-radiogroup-option-${K()}`}},setup(e,{attrs:r,slots:a,expose:d}){let p=W("RadioGroupOption"),f=_({name:"RadioGroupLabel"}),o=$({name:"RadioGroupDescription"}),R=E(null),S=s(()=>({value:e.value,disabled:e.disabled})),m=E(1);d({el:R,$el:R}),V(()=>p.registerOption({id:e.id,element:R,propsRef:S})),Y(()=>p.unregisterOption(e.id));let T=s(()=>{var l;return((l=p.firstOption.value)==null?void 0:l.id)===e.id}),u=s(()=>p.disabled.value||e.disabled),h=s(()=>p.compare(b(p.value.value),b(e.value))),y=s(()=>u.value?-1:h.value||!p.containsCheckedOption.value&&T.value?0:-1);function t(){var l;p.change(e.value)&&(m.value|=2,(l=R.value)==null||l.focus())}function n(){m.value|=2}function i(){m.value&=-3}return()=>{let C=e,{id:l,value:c,disabled:v}=C,O=A(C,["id","value","disabled"]),G={checked:h.value,disabled:u.value,active:Boolean(m.value&2)},J={id:l,ref:R,role:"radio","aria-checked":h.value?"true":"false","aria-labelledby":f.value,"aria-describedby":o.value,"aria-disabled":u.value?!0:void 0,tabIndex:y.value,onClick:u.value?void 0:t,onFocus:u.value?void 0:n,onBlur:u.value?void 0:i};return M({ourProps:J,theirProps:O,slot:G,attrs:r,slots:a,name:"RadioGroupOption"})}}}),De=ne,xe=re;export{Fe as RadioGroup,xe as RadioGroupDescription,De as RadioGroupLabel,Ce as RadioGroupOption};
