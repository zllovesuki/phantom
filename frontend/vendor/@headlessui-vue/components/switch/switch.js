var T=Object.defineProperty;var c=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var b=(e,n,t)=>n in e?T(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,f=(e,n)=>{for(var t in n||(n={}))v.call(n,t)&&b(e,t,n[t]);if(c)for(var t of c(n))S.call(n,t)&&b(e,t,n[t]);return e};var w=(e,n)=>{var t={};for(var r in e)v.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&c)for(var r of c(e))n.indexOf(r)<0&&S.call(e,r)&&(t[r]=e[r]);return t};import{Fragment as V,computed as p,defineComponent as k,h as C,inject as I,provide as O,ref as g,watch as F,onMounted as $}from"vue";import{render as R,compact as A,omit as U}from'../../utils/render.js';import{useId as _}from'../../hooks/use-id.js';import{Keys as D}from'../../keyboard.js';import{Label as q,useLabels as z}from'../label/label.js';import{Description as J,useDescriptions as N}from'../description/description.js';import{useResolveButtonType as Q}from'../../hooks/use-resolve-button-type.js';import{Hidden as W,Features as X}from'../../internal/hidden.js';import{attemptSubmit as Y}from'../../utils/form.js';import{useControllable as Z}from'../../hooks/use-controllable.js';import{dom as ee}from'../../utils/dom.js';let E=Symbol("GroupContext"),he=k({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:n,attrs:t}){let r=g(null),s=z({name:"SwitchLabel",props:{onClick(){r.value&&(r.value.click(),r.value.focus({preventScroll:!0}))}}}),i=N({name:"SwitchDescription"});return O(E,{switchRef:r,labelledby:s,describedby:i}),()=>R({theirProps:e,ourProps:{},slot:{},slots:n,attrs:t,name:"SwitchGroup"})}}),ye=k({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${_()}`}},inheritAttrs:!1,setup(e,{emit:n,attrs:t,slots:r,expose:s}){let i=I(E,null),[u,m]=Z(p(()=>e.modelValue),l=>n("update:modelValue",l),p(()=>e.defaultChecked));function h(){m(!u.value)}let K=g(null),a=i===null?K:i.switchRef,L=Q(p(()=>({as:e.as,type:t.type})),a);s({el:a,$el:a});function x(l){l.preventDefault(),h()}function H(l){l.key===D.Space?(l.preventDefault(),h()):l.key===D.Enter&&Y(l.currentTarget)}function P(l){l.preventDefault()}let d=p(()=>{var l,o;return(o=(l=ee(a))==null?void 0:l.closest)==null?void 0:o.call(l,"form")});return $(()=>{F([d],()=>{if(!d.value||e.defaultChecked===void 0)return;function l(){m(e.defaultChecked)}return d.value.addEventListener("reset",l),()=>{var o;(o=d.value)==null||o.removeEventListener("reset",l)}},{immediate:!0})}),()=>{let y=e,{id:l,name:o,value:j}=y,B=w(y,["id","name","value"]),G={checked:u.value},M={id:l,ref:a,role:"switch",type:L.value,tabIndex:0,"aria-checked":u.value,"aria-labelledby":i==null?void 0:i.labelledby.value,"aria-describedby":i==null?void 0:i.describedby.value,onClick:x,onKeyup:H,onKeypress:P};return C(V,[o!=null&&u.value!=null?C(W,A({features:X.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:u.value,name:o,value:j})):null,R({ourProps:M,theirProps:f(f({},t),U(B,["modelValue","defaultChecked"])),slot:G,attrs:t,slots:r,name:"Switch"})])}}}),be=q,ve=J;export{ye as Switch,ve as SwitchDescription,he as SwitchGroup,be as SwitchLabel};
